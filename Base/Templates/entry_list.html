<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <!-- MDB icon -->
    <link rel="icon" href="https://f005.backblazeb2.com/file/CyberMedia/Style/img/med-lg+(1).png" type="image/x-icon" />
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css" />
    <!-- Google Fonts Roboto -->
    <link rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap" />
    <!-- MDB -->
    <link rel="stylesheet" href="https://f005.backblazeb2.com/file/CyberMedia/Style/mdb.min.css" />

    <link href="https://vjs.zencdn.net/8.5.2/video-js.css" rel="stylesheet" />
    <link href="https://unpkg.com/@videojs/themes@1/dist/city/index.css" rel="stylesheet">
  </head>
  <title>Submit Entry</title>
  </head>
  <style>
    button {
        border-radius: 20px !important; /* Set border-radius as important */
    }
    
    a:hover {
        color: #DB353A !important; /* Set link hover color as important */
    }
    
    .navbar-light,
    .navbar-nav,
    .nav-link {
        color: #000 !important; /* Set navbar and link color as important */
    }
    
    .navbar-light,
    .navbar-nav,
    .nav-link:hover,
    .navbar-light,
    .navbar-nav,
    .nav-link:focus {
        color: #DB353A !important; /* Set navbar and link hover/focus color as important */
    }
    
    </style>
  <body>
    <div id="preview" class="preview">
      <div style="display: none;"></div>
      <div>
        <div data-draggable="true" style="position: relative;" draggable="false" class=""><!----><!---->
          <section draggable="false" class="overflow-hidden pt-0" data-v-271253ee="">
            <section class="" style="padding-bottom: 1px;"> <!-- Navbar -->
              <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-2"> <!-- Container wrapper -->
                <div class="container-fluid">
                  <div class="d-flex"> <!-- Toggle button --> <button class="navbar-toggler" type="button"
                      data-mdb-toggle="collapse" data-mdb-target="#navbarSupportedContent"
                      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"> <i
                        class="fas fa-bars"></i> </button> <!-- Navbar brand --> <a class="navbar-brand ms-3"
                      draggable="false"> <img src="https://f005.backblazeb2.com/file/CyberMedia/Style/img/med-lg.png" width="100" aria-controls="#picker-editor"></img> </a>
                  </div> <!-- Collapsible wrapper -->
                  <div class="collapse navbar-collapse" id="navbarSupportedContent"> <!-- Left links -->
                    <ul class="navbar-nav me-auto mb-2 ms-2 ps-1 ms-lg-0 ps-lg-0 mb-lg-0">
                      <li class="nav-item"> <a class="nav-link" href="/" aria-controls="#picker-editor"
                          draggable="false"><b>Home</b></a> </li>
                      <li class="nav-item"> <a class="nav-link" href="/Submission/" aria-controls="#picker-editor"
                          draggable="false"><b>View Submissions</b></a> </li>
                          <li class="nav-item">
                            <a id="vote-entry-link" class="nav-link" aria-controls="#picker-editor" draggable="false"><b>Vote an Entry</b></a>
                        </li>
                        <li class="nav-item">
                            <a id="live-broadcast-link" class="nav-link" draggable="false"><b>Watch Live Broadcast</b></a>
                        </li>
                        
                    </ul> <!-- Left links -->
                  </div> <!-- Collapsible wrapper --> <!-- Right elements -->
                  <div class="d-flex align-items-center"><button type="button" class="btn      btn-link px-3 mb-1 me-2"
                    aria-controls="#picker-editor"> <a href="/entry/">Submit Entry</a></button> <button type="button" class="btn btn-danger mb-1 me-lg-3" id="checkSubmissionButton" style="background-color: #DB353A; border-radius: 20px;">Check Submission</button>
                  </div>
              </nav> <!-- Navbar -->
            </section>
          </section><!---->
        </div>
      </div>
        
        <div id="checkSubmissionModal" class="modal">
          <div class="modal-content">
            <span id="closeCheckSubmissionModal" class="close">&times;</span>
            <h2>Check Submission</h2>
            <form id="checkSubmissionForm">
              {% csrf_token %}
              <label for="auto_id">Enter Your ID:</label>
              <input type="text" id="auto_id" name="auto_id" required>
              <br>
              <button type="submit">Check</button>
            </form>
          </div>
        </div>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" rel="stylesheet">
        <style type="text/css">
          body {
            background: #f3f3f3;
            color: #616f80;
            font-family: 'Oswald', Oswald;
          }
    
    
          .card {
            border: 1px solid #ddd;
            /* Add a border */
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);
            /* Add a box shadow */
            margin-bottom: 20px;
            /* Adjust spacing */
          }
    
          input[type="text"],
          input[type="number"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 16px;
          }
    
          label {
            font-weight: bold;
            display: block;
            margin-bottom: 5px;
          }
    
          .card {
            border: none;
            margin-bottom: 24px;
            -webkit-box-shadow: 0 0 13px 0 rgba(236, 236, 241, .44);
            box-shadow: 0 0 13px 0 rgba(236, 236, 241, .44);
          }
    
          .avatar-xs {
            height: 2.3rem;
            width: 2.3rem;
          }
    
          .cssbuttons-io-button {
            display: flex;
            align-items: center;
            font-family: inherit;
            font-weight: 500;
            font-size: 17px;
            padding: 0.8em 1.5em 0.8em 1.2em;
            color: white;
            background: #ad5389;
            background: linear-gradient(0deg, rgba(77, 54, 208, 1) 0%, rgba(132, 116, 254, 1) 100%);
            border: none;
            box-shadow: 0 0.7em 1.5em -0.5em #4d36d0be;
            letter-spacing: 0.05em;
            border-radius: 20em;
          }
    
          .cssbuttons-io-button svg {
            margin-right: 8px;
          }
    
          .cssbuttons-io-button:hover {
            box-shadow: 0 0.5em 1.5em -0.5em #4d36d0be;
          }
    
          .cssbuttons-io-button:active {
            box-shadow: 0 0.3em 1em -0.5em #4d36d0be;
          }
    
          .button-container {
            text-align: center;
            margin-top: 10px;
          }
        </style>
      </head>
    
      <body>
        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
        <div class="container">
          <div class="row">
            <div class="col-xl-3 col-md-6">
              <div class="card bg-pattern">

              </div>
            </div>
            <div class="col-xl-3 col-md-6">

            </div>
            <div class="col-xl-3 col-md-6">
              
            </div>
            <div class="col-xl-3 col-md-6">
              <div class="card">
                <div class="card-body">
                  <form method="GET" action="{% url 'user_list' %}">
                    <div class="form-group mb-0">
                      <label>Search by Name</label>
                      <div class="input-group mb-0">
                        <input type="text" name="q" class="form-control" placeholder="Search by Name..."
                          aria-describedby="project-search-addon" />
                        <div class="input-group-append">
                          <button class="btn btn-danger" id="project-search-addon"><i
                              class="fa fa-search search-icon font-12"></i></button>
                        </div>
                      </div>
                    </div>
                  </form>
                </div>
              </div>
            </div>
    
          </div>
          {% if query %}
          <p>Search results for: "{{ query }}"</p>
          {% endif %}
          <div class="row">
            <div class="col-lg-12">
              <div class="card">
                <div class="card-body">
                  <div class="table-responsive project-list">
                    <table class="table project-table table-centered table-nowrap">
                      <thead>
                        <tr>
                          <th scope="col">#</th>
                          <th scope="col">Entry</th>
                          <th scope="col">Educational Institution</th>
                          <th scope="col">State of Origin</th>
                          <th scope="col">Level</th>
                        </tr>
                      </thead>
                      <tbody>
                        {% for submission in submissions %}
                        <tr>
                          <th scope="row">{{ forloop.counter }}</th>
                          <td>{{ submission.name }}</td>
                          <td>{{ submission.educational_institution }}</td>
                          <td>
                            <span class="text-success font-12"><i class="mdi mdi-checkbox-blank-circle mr-1"></i>
                              {{ submission.state_of_origin }}</span>
                          </td>
                          <td>
                           {{ submission.current_level}}
                          </td>
                          
                        </tr>
                  </div>
                  {% endfor %}
                  </tbody>
                  </table>
                </div>
                <div class="pt-3">
                  <ul class="pagination justify-content-end mb-0">
                    <div class="pagination-container">
                      <ul class="pagination">
                          {% if submissions.has_previous %}
                              <li class="page-item">
                                  <a class="page-link" href="?page=1">First</a>
                              </li>
                              <li class="page-item">
                                  <a class="page-link" href="?page={{ submissions.previous_page_number }}">Previous</a>
                              </li>
                          {% endif %}
                  
                          {% for page_num in submissions.paginator.page_range %}
                              <li class="page-item {% if submissions.number == page_num %}active{% endif %}">
                                  <a class="page-link" href="?page={{ page_num }}">{{ page_num }}</a>
                              </li>
                          {% endfor %}
                  
                          {% if submissions.has_next %}
                              <li class="page-item">
                                  <a class="page-link" href="?page={{ submissions.next_page_number }}">Next</a>
                              </li>
                              <li class="page-item">
                                  <a class="page-link" href="?page={{ submissions.paginator.num_pages }}">Last</a>
                              </li>
                          {% endif %}
                      </ul>
                  </div>
                  
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>     
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script type="text/javascript" src="https://f005.backblazeb2.com/file/CyberMedia/Style/mdb.min.js"></script>
  <script>
    // Function to display the message
    function showMessage(message) {
        alert(message);
    }

    // Add a click event listener to the "Vote an Entry" link
    document.getElementById('vote-entry-link').addEventListener('click', function () {
        showMessage("Voting is not available until October.");
    });

    // Add a click event listener to the "Watch Live Broadcast" link
    document.getElementById('live-broadcast-link').addEventListener('click', function () {
        showMessage("Live broadcast is not available until October.");
    });
</script>
<script>
  // Function to show the pop-up form
  function showCheckSubmissionForm() {
    const modal = document.getElementById("checkSubmissionModal");
    modal.style.display = "block";
  }

  // Function to hide the pop-up form
  function hideCheckSubmissionForm() {
    const modal = document.getElementById("checkSubmissionModal");
    modal.style.display = "none";
  }

  // Event listener for the "Check Submission" button click
  const checkSubmissionButton = document.getElementById("checkSubmissionButton");
  checkSubmissionButton.addEventListener("click", showCheckSubmissionForm);

  // Event listener for the close button in the pop-up form
  const closeModalButton = document.getElementById("closeCheckSubmissionModal");
  closeModalButton.addEventListener("click", hideCheckSubmissionForm);
</script>
<script>
  // ... (Code for showing/hiding the form)

  // Event listener for the form submission
  const checkSubmissionForm = document.getElementById("checkSubmissionForm");
  checkSubmissionForm.addEventListener("submit", function (event) {
    event.preventDefault();

    const formData = new FormData(checkSubmissionForm);

    // Send an AJAX request to the Django view
    fetch("{% url 'check_submission' %}", {
      method: "POST",
      body: formData,
      headers: {
        "X-CSRFToken": "{{ csrf_token }}",
      },
    })
      .then((response) => response.json())
      .then((data) => {
    if ('error' in data) {
        // Display an error message if submission not found
        alert(data.error);
    } else if ('redirect_url' in data) {
        // Redirect the user to the entry page
        window.location.href = data.redirect_url;
    }

    // Hide the pop-up form
    hideCheckSubmissionForm();
})
      .catch((error) => {
        console.error("Error:", error);
      });
  });
</script>
<style>
.modal {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.7);
            }

            .modal-content {
                background-color: #fff;
                margin: 15% auto;
                padding: 20px;
                width: 80%;
                box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.3);
                border-radius: 5px;
                position: relative;
            }

            .close {
                position: absolute;
                top: 10px;
                right: 10px;
                font-size: 20px;
                cursor: pointer;
            }

            /* Style for the form elements */

            label {
                font-weight: bold;
                display: block;
                margin-bottom: 5px;
            }

            input[type="text"] {
                width: 100%;
                padding: 10px;
                margin-bottom: 15px;
                border: 1px solid #ccc;
                border-radius: 5px;
            }

            button[type="submit"] {
    background-color: #007BFF;
    color: #fff;
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s ease;
    width: 50%;
    display: block; /* Add this line */
    margin: 0 auto; /* Add this line */
}


            button[type="submit"]:hover {
                background-color: #0056b3;
            }

  .centered-form-container {
    background-color: #fff;
    padding: 20px;
    width: 80%;
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.3);
    border-radius: 5px;
    position: relative;
  }

  /* Rest of your modal and form styles remain unchanged */
</style>

</html>